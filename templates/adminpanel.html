<!DOCTYPE html>
<html lang="en">

<head>

    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Traker</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Custom Styles -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Background styling to match the design */
            background-color: #0B0E1E;
            background-image: url('../static/images/dark-gradient-background-with-copy-space_53876-99548.avif');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        /* Custom class for the glassmorphism effect */
        .glass-card {
            background-color: rgba(30, 35, 70, 0.5);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Custom scrollbar for a better look */
        ::-webkit-scrollbar {
            width: 5px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #4A5568;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #718096;
        }
    </style>
</head>

<body class="text-gray-200">

    <div class="container mx-auto px-4 py-6">

        <!-- Header -->
        <header class="glass-card rounded-xl p-4 flex justify-between items-center mb-12">
            <a href="{% url 'manager:adminpanel' %}" class="text-2xl font-bold tracking-wider text-white">Traker</a>
            <a href="{% url 'users:login' %}"> <button
                    class="bg-blue-500/50 hover:bg-blue-500/80 text-white font-semibold py-2 px-5 rounded-lg transition-colors">
                    Logout
                </button></a>
        </header>

        <!-- Main Content -->
        <main>
            <h1 class="text-3xl md:text-4xl font-bold text-white mb-8">Admin Dashboard</h1>

            <!-- Stats Cards -->
            <section class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <!-- Total Users Card -->
                <div class="glass-card rounded-2xl p-6 flex items-center justify-between">
                    <div>
                        <p class="text-lg text-gray-300">Total Users</p>
                        <p class="text-5xl font-extrabold text-white">{{ total_users }}</p>
                    </div>
                    <div class="bg-purple-500/20 p-4 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                            stroke="#a78bfa" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                            <circle cx="9" cy="7" r="4" />
                            <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
                            <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                        </svg>
                    </div>
                </div>
                <!-- Total Links Card -->
                <div class="glass-card rounded-2xl p-6 flex items-center justify-between">
                    <div>
                        <p class="text-lg text-gray-300">Total Links Created</p>
                        <p class="text-5xl font-extrabold text-white">{{ total_links }}</p>
                    </div>
                    <div class="bg-green-500/20 p-4 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                            stroke="#4ade80" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72" />
                            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72" />
                        </svg>
                    </div>
                </div>
            </section>

            <!-- Users Table -->
            <section class="glass-card rounded-2xl p-6 md:p-8">
                <h2 class="text-2xl font-bold mb-6">User Information</h2>
                <div class="overflow-x-auto">
                    <table class="w-full text-left">
                        <thead>
                            <tr class="border-b border-gray-600">
                                <th class="p-3">Sl. No</th>
                                <th class="p-3">Name</th>
                                <th class="p-3">Email</th>
                             
                                <th class="p-3 text-center">Links Created</th>
                                <th class="p-3 text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in users_data %}
                            <tr class="border-b border-gray-700/50">
                                <td class="p-3">{{ user.sl_no }}</td>
                                <td class="p-3">{{ user.name }}</td>
                                <td class="p-3">{{ user.email }}</td>
                               
                                <td class="p-3 text-center">{{ user.link_count }}</td>
                                <td class="p-3 text-center">
                                    <a href="{% url 'manager:delete_user' user.id %}"
                                        onclick="return confirm('Are you sure you want to delete this user?')"
                                        class="text-red-500 hover:text-red-600 px-3 py-1 rounded-lg text-sm">
                                        Remove
                                    </a>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="6" class="text-center p-3 text-gray-400">No users found.</td>
                            </tr>
                            {% endfor %}


                        </tbody>
                    </table>



                </div>




            </section>


            <section class="glass-card rounded-2xl p-6 md:p-2 mt-6">
                <div class="overflow-x-auto mt-10">
                    <table class="w-full text-left">
                        <thead>
                            <tr class="border-b border-gray-600">
                                <th class="p-3">Sl. No</th>
                                <th class="p-3">Email</th>
                                <th class="p-3">category</th>

                                <th class="p-3 text-center"> Created Link</th>
                                <th class="p-3 text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for link in links_data %}
                            <tr class="border-b border-gray-700/50">
                                <td class="p-3">{{ link.sl_no }}</td>
                                <td class="p-3">{{ link.email }}</td>
                                <td class="p-3">{{ link.category }}</td>
                                <td class="p-3 text-center">
                                    <a href="{{ link.created_link }}" target="_blank"
                                        class="text-blue-400 hover:underline">
                                        {{ link.created_link }}
                                    </a>
                                </td>
                                <td class="p-3 text-center">
                                    <a href="{% url 'manager:view_link' link.id %}"
                                        class="text-blue-500 hover:text-blue-600 px-3 py-1 rounded-lg text-sm">
                                        View
                                    </a>
                                    <a href="{% url 'manager:delete_link' link.id %}"
                                        onclick="return confirm('Are you sure you want to delete this link?')"
                                        class="text-red-500 hover:text-red-600 px-3 py-1 rounded-lg text-sm">
                                        Delete
                                    </a>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="5" class="text-center p-3 text-gray-400">No links found.</td>
                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>
                </div>
            </section>
        </main>

    </div>

</body>

</html>